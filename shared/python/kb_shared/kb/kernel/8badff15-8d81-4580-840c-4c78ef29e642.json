{
  "adr_id": "8badff15-8d81-4580-840c-4c78ef29e642",
  "title": "Integrate CapabilityChecker into the ICGL pipeline in api/server.py:\n\nBefore exe...",
  "decision": "Integrate CapabilityChecker into the ICGL pipeline in api/server.py:\n\nBefore executing run_analysis_task, add capability checking logic:\n\n1. Import CapabilityChecker from backend.agents.capability_checker\n2. In run_analysis_task function, after extracting the idea text:\n   - Check if idea mentions creating a new agent (contains 'agent', 'create', etc.)\n   - If yes, extract proposed capabilities from idea text\n   - Call checker.suggest_agent_creation(proposed_capabilities)\n   - Add check_result to the analysis metadata\n   - If recommendation is ENHANCE_EXISTING, add warning to analysis\n3. Return capability_check in the response so UI can display itCreate TestingAgent in backend/agents/testing.py:\n\nA new agent for automated test generation.\n\nRequirements:\n1. Import: Agent, AgentRole, Problem, AgentResult from .base\n2. Import: LLMClient, LLMConfig from ..llm.client\n3. Create class TestingAgent(Agent):\n   - __init__: Initialize with agent_id='agent-testing', role=AgentRole.TESTING (add to base.py enum)\n   - _analyze(problem, kb): Main test generation logic\n4. Test generation capabilities:\n   - Generate unit tests for functions/classes\n   - Generate integration tests\n   - Use pytest format\n   - Include assertions and edge cases\n   - Calculate coverage considerations\n5. Use LLM to analyze code and generate comprehensive tests\n6. Return AgentResult with:\n   - analysis: test generation report\n   - recommendations: additional test scenarios\n   - file_changes: test files to create\n7. Output format: test_*.py files with proper pytest structure\n\nThis fills the last critical gap in Phase 1.\n\nThis ensures CapabilityChecker runs automatically before agent creation.",
  "context_summary": "Integrate CapabilityChecker into the ICGL pipeline in api/server.py:\n\nBefore executing run_analysis_task, add capability checking logic:\n\n1. Import CapabilityChecker from backend.agents.capability_checker\n2. In run_analysis_task function, after extracting the idea text:\n   - Check if idea mentions creating a new agent (contains 'agent', 'create', etc.)\n   - If yes, extract proposed capabilities from idea text\n   - Call checker.suggest_agent_creation(proposed_capabilities)\n   - Add check_result t",
  "full_context": "Integrate CapabilityChecker into the ICGL pipeline in api/server.py:\n\nBefore executing run_analysis_task, add capability checking logic:\n\n1. Import CapabilityChecker from backend.agents.capability_checker\n2. In run_analysis_task function, after extracting the idea text:\n   - Check if idea mentions creating a new agent (contains 'agent', 'create', etc.)\n   - If yes, extract proposed capabilities from idea text\n   - Call checker.suggest_agent_creation(proposed_capabilities)\n   - Add check_result to the analysis metadata\n   - If recommendation is ENHANCE_EXISTING, add warning to analysis\n3. Return capability_check in the response so UI can display itCreate TestingAgent in backend/agents/testing.py:\n\nA new agent for automated test generation.\n\nRequirements:\n1. Import: Agent, AgentRole, Problem, AgentResult from .base\n2. Import: LLMClient, LLMConfig from ..llm.client\n3. Create class TestingAgent(Agent):\n   - __init__: Initialize with agent_id='agent-testing', role=AgentRole.TESTING (add to base.py enum)\n   - _analyze(problem, kb): Main test generation logic\n4. Test generation capabilities:\n   - Generate unit tests for functions/classes\n   - Generate integration tests\n   - Use pytest format\n   - Include assertions and edge cases\n   - Calculate coverage considerations\n5. Use LLM to analyze code and generate comprehensive tests\n6. Return AgentResult with:\n   - analysis: test generation report\n   - recommendations: additional test scenarios\n   - file_changes: test files to create\n7. Output format: test_*.py files with proper pytest structure\n\nThis fills the last critical gap in Phase 1.\n\nThis ensures CapabilityChecker runs automatically before agent creation.",
  "status": "DRAFT",
  "timestamp": "2026-01-22T07:37:39.580536+00:00",
  "logical_impact": "LEGACY_MIGRATION",
  "governance_phase": 11,
  "migrated": true,
  "consequences": [],
  "policies": []
}