{"openapi":"3.1.0","info":{"title":"ICGL Sovereign Cockpit API","version":"1.2.0"},"paths":{"/api/quick/code":{"post":{"tags":["Quick Execution"],"summary":"Quick Code Execution","description":"Direct code execution bypass - uses only BuilderAgent + file writing.\n\nNo LanceDB, no Policy checks, no Sentinel - just fast idea → code → disk.","operationId":"quick_code_execution_api_quick_code_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuickCodeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuickCodeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Serve Landing","description":"Serve unified landing page as root","operationId":"serve_landing__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/api/events":{"get":{"summary":"Get Events","description":"Return recent system events from observability if available; fallback empty.","operationId":"get_events_api_events_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/api/governance/proposals":{"get":{"summary":"Get Proposals","description":"Return all ADRs/Proposals from KB.","operationId":"get_proposals_api_governance_proposals_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/api/governance/decisions":{"get":{"summary":"Get Decisions","description":"Return only approved/executed decisions.","operationId":"get_decisions_api_governance_decisions_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/api/governance/decisions/register":{"post":{"summary":"Register Decision Api","description":"Registers a human decision for an ADR and persists it.","operationId":"register_decision_api_api_governance_decisions_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DecisionRegisterRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/governance/timeline":{"get":{"summary":"Get Governance Timeline","description":"Return a timeline of governance events.","operationId":"get_governance_timeline_api_governance_timeline_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/api/governance/conflicts":{"get":{"summary":"Get Conflicts","description":"Return stored conflicts (in-memory placeholder).","operationId":"get_conflicts_api_governance_conflicts_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}}}},"post":{"summary":"Create Conflict","description":"Create a conflict entry (in-memory placeholder).","operationId":"create_conflict_api_governance_conflicts_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Conflict"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/chat/terminal":{"post":{"summary":"Run Terminal","description":"Safe stub for terminal execution. Returns echo of the command without executing.","operationId":"run_terminal_api_chat_terminal_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TerminalRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/chat/file/write":{"post":{"summary":"Write File Api","description":"Safe stub for file write. Does not write to disk; returns intent only.","operationId":"write_file_api_api_chat_file_write_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileWriteRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/governance/adr/latest":{"get":{"summary":"Get Latest Adr Api","description":"Alias for /status-like latest ADR fetch.","operationId":"get_latest_adr_api_api_governance_adr_latest_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/api/idea-summary/{adr_id}":{"get":{"summary":"Get Idea Summary","description":"Return summary for a given ADR from KB if available.","operationId":"get_idea_summary_api_idea_summary__adr_id__get","parameters":[{"name":"adr_id","in":"path","required":true,"schema":{"type":"string","title":"Adr Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Diagnostic endpoint to verify system sanity.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Health Check Health Get"}}}}}}},"/status":{"get":{"summary":"Get Status","operationId":"get_status_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Status Status Get"}}}}}}},"/propose":{"post":{"summary":"Propose Decision","operationId":"propose_decision_propose_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProposalRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/governance/proposals/create":{"post":{"summary":"Create Proposal Api","description":"UI alias to /propose. Uses same governed flow.","operationId":"create_proposal_api_api_governance_proposals_create_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProposalRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/governance/proposals/{proposal_id}":{"patch":{"summary":"Patch Proposal Api","description":"Basic proposal patching: currently supports status update only.","operationId":"patch_proposal_api_api_governance_proposals__proposal_id__patch","parameters":[{"name":"proposal_id","in":"path","required":true,"schema":{"type":"string","title":"Proposal Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Payload"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/idea-run":{"post":{"summary":"Idea Run","description":"Fast path: take freeform idea text, wrap it as an ADR, and trigger full ICGL (with auto-approve if enabled).","operationId":"idea_run_idea_run_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdeaRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/idea-run":{"post":{"summary":"Idea Run Api","operationId":"idea_run_api_api_idea_run_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IdeaRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/analysis/{adr_id}":{"get":{"summary":"Get Analysis","operationId":"get_analysis_analysis__adr_id__get","parameters":[{"name":"adr_id","in":"path","required":true,"schema":{"type":"string","title":"Adr Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Analysis Analysis  Adr Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/analysis/latest":{"get":{"summary":"Get Latest Analysis","operationId":"get_latest_analysis_api_analysis_latest_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/api/analysis/{adr_id}":{"get":{"summary":"Get Analysis Api","operationId":"get_analysis_api_api_analysis__adr_id__get","parameters":[{"name":"adr_id","in":"path","required":true,"schema":{"type":"string","title":"Adr Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Analysis Api Api Analysis  Adr Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/system/agents":{"get":{"summary":"List Agents","description":"Lists registered agents to satisfy frontend fetches with rich metadata.","operationId":"list_agents_api_system_agents_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/system/agents":{"get":{"summary":"List Agents","description":"Lists registered agents to satisfy frontend fetches with rich metadata.","operationId":"list_agents_system_agents_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/api/system/agents/{agent_id}/run":{"post":{"summary":"Run Agent Api","description":"Run a specific agent by id. Returns the AgentResult shape or 404/400.","operationId":"run_agent_api_api_system_agents__agent_id__run_post","parameters":[{"name":"agent_id","in":"path","required":true,"schema":{"type":"string","title":"Agent Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgentRunRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sign/{adr_id}":{"post":{"summary":"Sign Decision","operationId":"sign_decision_sign__adr_id__post","parameters":[{"name":"adr_id","in":"path","required":true,"schema":{"type":"string","title":"Adr Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kb/{type}":{"get":{"summary":"List Kb","operationId":"list_kb_kb__type__get","parameters":[{"name":"type","in":"path","required":true,"schema":{"type":"string","title":"Type"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response List Kb Kb  Type  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/kb/adr/{adr_id}":{"delete":{"summary":"Delete Adr","operationId":"delete_adr_kb_adr__adr_id__delete","parameters":[{"name":"adr_id","in":"path","required":true,"schema":{"type":"string","title":"Adr Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Delete Adr Kb Adr  Adr Id  Delete"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/chat":{"post":{"summary":"Chat Endpoint","description":"Conversational interface endpoint.\n\nUser sends natural language message, system responds with rich structured content.","operationId":"chat_endpoint_chat_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/observability/stats":{"get":{"summary":"Get Observability Stats","description":"Get observability ledger statistics","operationId":"get_observability_stats_observability_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/observability/traces":{"get":{"summary":"List Recent Traces","description":"List recent traces with metadata","operationId":"list_recent_traces_observability_traces_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/observability/trace/{trace_id}":{"get":{"summary":"Get Trace Details","description":"Get complete trace for replay","operationId":"get_trace_details_observability_trace__trace_id__get","parameters":[{"name":"trace_id","in":"path","required":true,"schema":{"type":"string","title":"Trace Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/observability/trace/{trace_id}/graph":{"get":{"summary":"Get Trace Graph","description":"Get trace visualization graph","operationId":"get_trace_graph_observability_trace__trace_id__graph_get","parameters":[{"name":"trace_id","in":"path","required":true,"schema":{"type":"string","title":"Trace Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/observability/events":{"get":{"summary":"Query Events","description":"Query events with filters","operationId":"query_events_observability_events_get","parameters":[{"name":"trace_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Trace Id"}},{"name":"session_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}},{"name":"adr_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Adr Id"}},{"name":"event_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Event Type"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/channels":{"get":{"summary":"List Active Channels","description":"List all active communication channels","operationId":"list_active_channels_channels_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/channels/{channel_id}/terminate":{"post":{"summary":"Terminate Channel","description":"Emergency channel termination (human override)","operationId":"terminate_channel_channels__channel_id__terminate_post","parameters":[{"name":"channel_id","in":"path","required":true,"schema":{"type":"string","title":"Channel Id"}},{"name":"reason","in":"query","required":false,"schema":{"type":"string","default":"User requested","title":"Reason"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/channels/stats":{"get":{"summary":"Get Channel Stats","description":"Get channel router statistics","operationId":"get_channel_stats_channels_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/channels/{channel_id}":{"get":{"summary":"Get Channel Details","description":"Get detailed information about a specific channel","operationId":"get_channel_details_channels__channel_id__get","parameters":[{"name":"channel_id","in":"path","required":true,"schema":{"type":"string","title":"Channel Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/status":{"get":{"summary":"Get Api Status","operationId":"get_api_status_api_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/policies":{"get":{"summary":"List Policies","description":"List all available policies (static and conditional)","operationId":"list_policies_policies_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/policies/{policy_name}":{"get":{"summary":"Get Policy Details","description":"Get detailed policy information","operationId":"get_policy_details_policies__policy_name__get","parameters":[{"name":"policy_name","in":"path","required":true,"schema":{"type":"string","title":"Policy Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/policies/test/{policy_name}":{"post":{"summary":"Test Policy Evaluation","description":"Test conditional policy evaluation with given context.\n\nRequest body:\n{\n    \"from_agent\": \"agent_id\",\n    \"to_agent\": \"other_agent_id\"\n}\n\nReturns which policy would be active given current conditions.","operationId":"test_policy_evaluation_policies_test__policy_name__post","parameters":[{"name":"policy_name","in":"path","required":true,"schema":{"type":"string","title":"Policy Name"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Context"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/patterns/alerts":{"get":{"summary":"Get Pattern Alerts","description":"Get recent pattern detection alerts","operationId":"get_pattern_alerts_patterns_alerts_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/patterns/detect":{"post":{"summary":"Run Pattern Detection","description":"Run pattern detection on recent events","operationId":"run_pattern_detection_patterns_detect_post","parameters":[{"name":"window_minutes","in":"query","required":false,"schema":{"type":"integer","default":5,"title":"Window Minutes"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ml/status":{"get":{"summary":"Get Ml Status","description":"Get ML detector status and training info","operationId":"get_ml_status_ml_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/ml/train":{"post":{"summary":"Train Ml Models","description":"Manually trigger ML model training","operationId":"train_ml_models_ml_train_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/ml/anomalies":{"get":{"summary":"Get Ml Anomalies","description":"Get ML-detected anomalies","operationId":"get_ml_anomalies_ml_anomalies_get","parameters":[{"name":"window_minutes","in":"query","required":false,"schema":{"type":"integer","default":15,"title":"Window Minutes"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/ml/anomalies/history":{"get":{"summary":"Get Anomaly History","description":"Get historical anomalies","operationId":"get_anomaly_history_ml_anomalies_history_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mind/graph":{"get":{"summary":"Get Mind Graph","description":"Get the node-link data for the Extended Mind visualization","operationId":"get_mind_graph_mind_graph_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/system/docs/tree":{"get":{"summary":"Get Docs Tree","description":"Get file structure of the knowledge base","operationId":"get_docs_tree_system_docs_tree_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/system/docs/content":{"get":{"summary":"Get Doc Content","description":"Read content of a file","operationId":"get_doc_content_system_docs_content_get","parameters":[{"name":"path","in":"query","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/system/docs/save":{"post":{"summary":"Save Doc Content","description":"Save content to a file","operationId":"save_doc_content_system_docs_save_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object","title":"Payload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/workspace":{"get":{"summary":"List Workspace","description":"List files in the AI workspace (data/ai_workspace) with safety checks.","operationId":"list_workspace_api_workspace_get","parameters":[{"name":"path","in":"query","required":false,"schema":{"type":"string","default":".","title":"Path"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":200,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/workspace/read":{"get":{"summary":"Read Workspace File","description":"Read a text file from the AI workspace.","operationId":"read_workspace_file_api_workspace_read_get","parameters":[{"name":"path","in":"query","required":true,"schema":{"type":"string","title":"Path"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/coc/chat":{"post":{"summary":"Conversational Chat","description":"Main COC endpoint - Natural language conversation.\n\nFlow:\n1. Get or create session\n2. Add user message to history\n3. Use dialogue manager to determine next action\n4. Resolve intent with context\n5. Execute or clarify as needed\n6. Generate natural response\n7. Update session state","operationId":"conversational_chat_coc_chat_post","parameters":[{"name":"message","in":"query","required":true,"schema":{"type":"string","title":"Message"}},{"name":"session_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}},{"name":"user_id","in":"query","required":false,"schema":{"type":"string","default":"default_user","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/coc/sessions":{"post":{"summary":"Create Conversation Session","description":"Create new conversation session","operationId":"create_conversation_session_coc_sessions_post","parameters":[{"name":"user_id","in":"query","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/coc/sessions/{session_id}":{"get":{"summary":"Get Conversation Session","description":"Get session details","operationId":"get_conversation_session_coc_sessions__session_id__get","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"summary":"Close Conversation Session","description":"Close conversation session","operationId":"close_conversation_session_coc_sessions__session_id__delete","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/coc/sessions/{session_id}/history":{"get":{"summary":"Get Conversation History","description":"Get conversation history","operationId":"get_conversation_history_coc_sessions__session_id__history_get","parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/coc/users/{user_id}/sessions":{"get":{"summary":"Get User Sessions","description":"Get all sessions for a user","operationId":"get_user_sessions_coc_users__user_id__sessions_get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AgentRunRequest":{"properties":{"title":{"type":"string","title":"Title"},"context":{"type":"string","title":"Context"}},"type":"object","required":["title","context"],"title":"AgentRunRequest"},"ChatContext":{"properties":{"open_files":{"items":{"type":"string"},"type":"array","title":"Open Files"},"selection":{"type":"string","title":"Selection","default":""},"mode":{"type":"string","title":"Mode","default":"auto"},"human_id":{"type":"string","title":"Human Id","default":"user"}},"type":"object","title":"ChatContext","description":"User context for chat requests."},"ChatMessage":{"properties":{"role":{"type":"string","enum":["user","system","assistant"],"title":"Role"},"content":{"type":"string","title":"Content","default":""},"text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Text"},"blocks":{"items":{"$ref":"#/components/schemas/MessageBlock"},"type":"array","title":"Blocks"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["role"],"title":"ChatMessage","description":"Single message in conversation."},"ChatRequest":{"properties":{"message":{"type":"string","title":"Message","description":"User's message"},"session_id":{"type":"string","title":"Session Id"},"context":{"anyOf":[{"$ref":"#/components/schemas/ChatContext"},{"type":"null"}]}},"type":"object","required":["message"],"title":"ChatRequest","description":"Incoming chat message from user."},"ChatResponse":{"properties":{"messages":{"items":{"$ref":"#/components/schemas/ChatMessage"},"type":"array","title":"Messages"},"state":{"additionalProperties":true,"type":"object","title":"State"},"suggestions":{"items":{"type":"string"},"type":"array","title":"Suggestions"}},"type":"object","required":["messages"],"title":"ChatResponse","description":"Response from chat endpoint."},"DecisionRegisterRequest":{"properties":{"proposal_id":{"type":"string","title":"Proposal Id"},"decision":{"type":"string","title":"Decision"},"rationale":{"type":"string","title":"Rationale"},"signed_by":{"type":"string","title":"Signed By","default":"operator"}},"type":"object","required":["proposal_id","decision","rationale"],"title":"DecisionRegisterRequest"},"FileWriteRequest":{"properties":{"path":{"type":"string","title":"Path"},"content":{"type":"string","title":"Content"},"mode":{"type":"string","title":"Mode","default":"w"}},"type":"object","required":["path","content"],"title":"FileWriteRequest"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"IdeaRequest":{"properties":{"idea":{"type":"string","title":"Idea"},"human_id":{"type":"string","title":"Human Id","default":"bakheet"}},"type":"object","required":["idea"],"title":"IdeaRequest","description":"Lightweight idea input; will be transformed into an ADR for execution."},"MessageBlock":{"properties":{"type":{"type":"string","enum":["analysis","alerts","actions","adr","metrics","text","memory"],"title":"Type"},"data":{"additionalProperties":true,"type":"object","title":"Data"},"collapsed":{"type":"boolean","title":"Collapsed","default":true},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"}},"type":"object","required":["type","data"],"title":"MessageBlock","description":"Rich content block in a message."},"ProposalRequest":{"properties":{"title":{"type":"string","title":"Title"},"context":{"type":"string","title":"Context"},"decision":{"type":"string","title":"Decision"},"human_id":{"type":"string","title":"Human Id","default":"bakheet"}},"type":"object","required":["title","context","decision"],"title":"ProposalRequest"},"QuickCodeRequest":{"properties":{"instruction":{"type":"string","title":"Instruction"},"target_file":{"type":"string","title":"Target File"},"file_content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"File Content"}},"type":"object","required":["instruction","target_file"],"title":"QuickCodeRequest","description":"Minimal request for direct code changes."},"QuickCodeResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"file_path":{"type":"string","title":"File Path"},"changes_applied":{"type":"boolean","title":"Changes Applied"},"message":{"type":"string","title":"Message"},"generated_content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Generated Content"}},"type":"object","required":["success","file_path","changes_applied","message"],"title":"QuickCodeResponse","description":"Response from quick code execution."},"SignRequest":{"properties":{"action":{"type":"string","title":"Action"},"rationale":{"type":"string","title":"Rationale"},"human_id":{"type":"string","title":"Human Id","default":"bakheet"}},"type":"object","required":["action","rationale"],"title":"SignRequest"},"TerminalRequest":{"properties":{"cmd":{"type":"string","title":"Cmd"},"path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Path"},"lines":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Lines"},"content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content"}},"type":"object","required":["cmd"],"title":"TerminalRequest"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}